# 관측성/운영 런북

## 1. SLI/SLO
- API 응답 지연(P95): 300ms 이하(평가 비동기 제외)
- 제출 파이프라인 완료율: 99%+
- 평가 완료 시간(P95): 15초 이하
- 오류율(5xx): 1% 미만

## 2. 필수 대시보드
1. API 대시보드
   - RPS, 지연, 오류율, 엔드포인트별 실패율
2. 비동기 파이프라인 대시보드
   - 큐 길이, 처리량, 재시도율, DLQ 크기
3. AI 평가 대시보드
   - 모델별 지연/비용/오류율, 캐시 히트율
4. 샌드박스 대시보드
   - 타임아웃, 자원 초과 종료 건수, 보안 이벤트

## 3. 알람 정책
- 큐 적체: 5분 이상 임계치 초과 시 경고
- AI 평가 실패율 급증: 5분 이동평균 기준 경고
- Judge0 응답 실패: 즉시 경고
- 비용 급증: 일 예산 70/90/100% 알림

## 4. 장애 대응 플레이북
### 4.1 큐 정체
1. Asynq 워커 상태 확인
2. 특정 작업 타입 편중 여부 확인
3. 워커 수평 확장
4. 필요 시 저우선순위 큐 일시 중지

### 4.2 Judge0 장애
1. 헬스체크/의존 서비스 점검
2. 장애 구간 제출은 재시도 큐로 이동
3. 복구 후 순차 재처리

### 4.3 AI API 장애
1. Tier 강등(fallback 모델)
2. 캐시 우선 정책 강화
3. 장기 장애 시 임시 평가 모드(정적 분석 중심) 전환

## 5. 운영 점검 주기
- 일일: 오류율/큐/비용 점검
- 주간: SLO 달성률 리뷰
- 월간: 알람 튜닝 및 런북 업데이트
