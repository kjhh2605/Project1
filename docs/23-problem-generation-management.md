# 문제 생성/관리 시스템 준비 문서 (MVP)

## 1. 목표
오픈소스 PR 기반으로 디버깅 문제를 생성하고, 자동/수동 검증을 거쳐 안전하게 퍼블리시하는 운영 체계를 구축한다.

## 2. MVP 범위
- 소스 수집: GitHub PR 기반(화이트리스트 저장소)
- 생성: LLM 템플릿 기반 문제 초안 생성
- 검증: 구문/실행/정답/품질 자동 검증 + 관리자 수동 승인
- 관리: Draft → Review → Published → Archived 상태 전이

## 3. 파이프라인(실행 순서)
1. `source:collect_prs` : PR 메타/패치 수집
2. `problem:generate` : PR 컨텍스트 기반 문제 초안 생성
3. `problem:validate_auto` : 자동 검증(컴파일/재현/정답/품질)
4. `problem:submit_review` : 관리자 리뷰 대기열 등록
5. `problem:publish` : 승인된 문제 퍼블리시

## 4. 운영 정책
### 4.1 저장소 화이트리스트
- Java/Python 대상 저장소를 고정 리스트로 관리
- 허용 라이선스(MIT/Apache-2.0/BSD 계열)만 수집 대상

### 4.2 품질 게이트
- 자동 검증 100% 통과 + 관리자 체크리스트 승인 시만 Published
- 실패 항목은 사유 코드와 함께 Draft로 롤백

### 4.3 저작권/라이선스
- source_info에 원본 repo/PR/license/attribution 저장
- 문제 코드는 교육 목적에 맞게 변형하고 원문 대량 복제 금지

## 5. 관리자 화면 요구사항(최소)
- 생성 작업(Job) 목록/상태
- 검토 대기 문제 목록
- 문제 상세(원본 컨텍스트/자동검증 리포트/수정 이력)
- 승인/반려/아카이브 액션

## 6. KPI
- 자동 검증 통과율
- 리뷰 반려율
- 퍼블리시까지 평균 리드타임
- 퍼블리시 후 문제 품질 지표(정답률, 신고율)

## 7. 리스크 및 완화
- GitHub API rate limit → 쿼리 분산/증분 수집
- 생성 품질 편차 → 문제 템플릿 버전 관리 + 샘플링 검수
- 라이선스 리스크 → 화이트리스트 + 메타데이터 강제 저장


## 구현 기준(확정)
- Problem Factory는 **Python FastAPI** 기반으로 구현한다.
- 백그라운드 작업은 Celery(권장) 또는 RQ를 사용한다.
- Redis를 브로커/결과 저장으로 사용한다.
