---
name: vibe-backend-lifecycle-di
description: Go 백엔드의 의존성 주입(Wire/Fx)과 서버 라이프사이클(시작/종료 훅, graceful shutdown)을 표준화하는 스킬. 서비스 확장, 모듈 증가, 운영 안정성 개선이 필요할 때 사용.
---

# DI 및 라이프사이클 관리

## 목표
초기화 복잡도를 줄이고 안전한 기동/종료를 보장한다.

## 의사결정 가이드
- Wire: 컴파일 타임 안전성과 낮은 오버헤드가 최우선일 때 사용.
- Fx: 모듈성, 훅 기반 생명주기 관리가 중요할 때 사용.

## 필수 구현 항목
1. 서버 시작 로직과 비즈니스 의존성 조립을 분리한다.
2. `OnStart/OnStop` 또는 동등한 훅으로 외부 리소스를 관리한다.
3. 종료 시 `http.Server.Shutdown`으로 유예 시간 내 처리 완료를 보장한다.
4. DB/큐/캐시 커넥션 종료 순서를 명시한다.

## 체크리스트
- [ ] SIGTERM/SIGINT 수신 시 정상 종료되는가?
- [ ] 진행 중 요청이 타임아웃 정책 내에서 마무리되는가?
- [ ] 시작 실패 시 부분 초기화 리소스가 정리되는가?
